let pokemonRepository=(function(){let pokemonList=[];let apiUrl="https://pokeapi.co/api/v2/pokemon/?limit=150";let dialogPromiseReject;searchPokemon();function loadList(){return fetch(apiUrl).then(function(response){return response.json()}).then(function(json){json.results.forEach(function(item){let pokemon={name:item.name,detailsUrl:item.url,};add(pokemon)})}).catch(function(e){console.error(e)})}function add(pokemon){if(typeof pokemon==="object"&&"name"in pokemon){pokemonList.push(pokemon)}else{console.log(pokemon);alert("You have entered Invalid Information");console.log("error")}}function getAll(){return pokemonList}function addListItem(pokemon){let button=document.createElement("button");button.innerText=pokemon.name;button.classList.add("btn","btn-primary","button-class");button.setAttribute("data-toggle","modal");button.setAttribute("data-target","#modal-container");document.querySelector("#pokeList").appendChild(button);button.addEventListener("click",()=>{showDetails(pokemon)})}function showDetails(pokemon){loadDetails(pokemon).then(function(){showModal(pokemon)})}function loadDetails(pokemon){let url=pokemon.detailsUrl;return fetch(url).then(function(response){return response.json()}).then(function(details){pokemon.imageUrlFront=details.sprites.front_default;pokemon.imageUrlBack=details.sprites.back_default;pokemon.height=details.height;pokemon.weight=details.weight;pokemon.types=[];details.types.forEach((element)=>{pokemon.types.push(element.type.name)});pokemon.abilities=[];details.abilities.forEach((element)=>{pokemon.abilities.push(element.ability.name)})}).catch(function(e){console.error(e)})}function showModal(pokemon){let modalTitle=$(".modal-title");let modalBody=$(".modal-body");let modalFooter=$(".modal-footer");modalTitle.empty();modalBody.empty();modalFooter.empty();let nameElement=$(`<h1>${pokemon.name }</h1>`);let imageElementFront=$('<img class="modal-image" style="width:50%">');imageElementFront.attr("src",pokemon.imageUrlFront);let imageElementBack=$('<img class="modal-image" style="width:50%">');imageElementBack.attr("src",pokemon.imageUrlBack);let heightElement=$(`<p><br>Height: ${pokemon.height }</p><br>`);let weightElement=$(`<p>Weight: ${pokemon.weight }</p><br>`);let typeElement=$(`<p>Types: ${pokemon.types }</p><br>`);let abilitiesElement=$(`<p>Abilities: ${pokemon.abilities }</p>`);modalTitle.append(nameElement);modalBody.append(imageElementFront);modalBody.append(imageElementBack);modalBody.append(heightElement);modalBody.append(weightElement);modalBody.append(typeElement);modalBody.append(abilitiesElement)}function searchPokemon(){let searchButton=document.querySelector("#searchButton");searchButton.setAttribute("data-toggle","modal");searchButton.setAttribute("data-target","#modal-container");searchButton.addEventListener("click",()=>{showDialog()})}function showDialog(){let modalTitle=$(".modal-title");let modalBody=$(".modal-body");let modalFooter=$(".modal-footer");modalTitle.empty();modalBody.empty();modalFooter.empty();let searchQuestion=$(`<h1>Type Pokemon Name In Search Bar: </h1>`);let userInput=$('<input type="text" class="form-control">');let confirmButton=$('<button class="btn btn-primary button-class">Confirm</button>');modalTitle.append(searchQuestion);modalBody.append(userInput);modalFooter.append(confirmButton);confirmButton.focus();return new Promise((resolve,reject)=>{confirmButton.on("click",()=>{let pokeCheck=pokeTest(userInput.val());if(pokeCheck.length===0){console.log("error");alert("You Have Entered Invalid Information!")}else{showDetails(pokeCheck[0])}resolve()});dialogPromiseReject=reject})}function pokeTest(var1){return pokemonList.filter((nameCheck)=>nameCheck.name.toLowerCase()===var1.toLowerCase())}return{add:add,getAll:getAll,pokeTest:pokeTest,addListItem:addListItem,loadList:loadList,loadDetails:loadDetails,searchPokemon:searchPokemon}})();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(pokemon){pokemonRepository.addListItem(pokemon)})});